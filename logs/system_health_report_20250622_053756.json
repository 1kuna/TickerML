{
  "timestamp": "2025-06-22T05:36:39.779513",
  "tests": {
    "total": 20,
    "passed": 12,
    "failed": 8,
    "success_rate": 0.6,
    "results": {
      "test_performance_simple": {
        "status": "passed",
        "output": "Created test database: /var/folders/_k/jgwy_y355q9cyy6vl9t1qh500000gn/T/tmpbl_dh908.db\n\u26a1 TickerML Performance Test Suite (Simplified)\n==================================================\n\n\ud83d\udcbe Testing database performance...\n  \u2705 Average read time: 0.37ms\n  \u2705 Average aggregation time: 0.02ms\n  \u2705 Average write time: 0.26ms\n  \u2705 Read throughput: 2675.2 ops/sec\n  \u2705 Write throughput: 3848.9 ops/sec\n\n\u26a0\ufe0f Testing risk calculation speed...\n  \u2705 Average risk assessment: 2.32ms\n  \u2705 Average position check: 2.21ms\n  \u2705 Risk assessments/sec: 431.7\n  \u2705 Position checks/sec: 453.3\n\n\ud83e\uddee Testing computation performance...\n  \u2705 Matrix multiplication: 0.37ms\n  \u2705 Statistical calculations: 0.05ms\n  \u2705 Array operations: 0.10ms\n  \u2705 Matrix ops/sec: 2710.3\n\n\ud83e\uddee Testing memory usage...\n  \u2705 Baseline memory: 116.7MB\n  \u2705 Small dataset overhead: 0.0MB\n  \u2705 Medium dataset overhead: 7.6MB\n  \u2705 Large dataset overhead: 84.0MB\n  \u2705 Peak memory: 200.7MB\n\n\ud83d\udcbb Testing system resources...\n  \u2705 CPU cores: 12\n  \u2705 CPU frequency: 4056MHz\n  \u2705 Memory total: 18.0GB\n  \u2705 Memory available: 5.7GB\n  \u2705 Average CPU usage: 33.6%\n\n\ud83d\udccb Performance Test Summary\n==================================================\nDatabase Performance: 174/100 (reads: 0.4ms, writes: 0.3ms)\nRisk Calculation: 153/100 (avg: 2.3ms)\nComputation Performance: 146/100 (matrix: 0.4ms)\nMemory Efficiency: 158/100 (overhead: 84.0MB)\nSystem Utilization: 49/100 (CPU: 33.6%, Memory: 68.3%)\n\n\ud83c\udfc6 Overall Performance Score: 136/100\n\ud83d\udfe2 EXCELLENT - Production ready performance\nRecommendation: System performs excellently across all metrics\n\n\ud83d\udcc8 Performance Recommendations:\nCleaned up test database: /var/folders/_k/jgwy_y355q9cyy6vl9t1qh500000gn/T/tmpbl_dh908.db\n",
        "error": "INFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 1000 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (1, 1)\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating correlation risk: matmul: Input operand 1 has a mismatch in its core dimension 0, with gufunc signature (n?,k),(k,m?)->(n?,m?) (size 1 is different from 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Loaded price data: 999 periods, 1 symbols\n"
      },
      "test_newsapi": {
        "status": "passed",
        "output": "\ud83d\udd0d Testing NewsAPI connection...\nAPI Key: 57307964fd...\n\n\ud83d\udcf0 Test 1: Searching for 'Bitcoin' in last 24 hours...\nStatus Code: 429\n\u274c Error: 429\nResponse: {\"status\":\"error\",\"code\":\"rateLimited\",\"message\":\"You have made too many requests recently. Developer accounts are limited to 100 requests over a 24 hour period (50 requests available every 12 hours). Please upgrade to a paid plan if you need more requests.\"}\n\n\ud83d\udd27 Test 2: Checking API status...\nSources API Status: 429\n\u274c API Error: {\"status\":\"error\",\"code\":\"rateLimited\",\"message\":\"You have made too many requests recently. Developer accounts are limited to 100 requests over a 24 hour period (50 requests available every 12 hours). Please upgrade to a paid plan if you need more requests.\"}\n",
        "error": ""
      },
      "test_new_components": {
        "status": "passed",
        "output": "================================================================================\nTickerML New Components Test Suite\n================================================================================\n\n==================== TestTradeStream ====================\n\n==================== TestEventSynchronizer ====================\n\n==================== TestDataValidator ====================\n\n==================== TestFundingMonitor ====================\n\n==================== TestPaperTrader ====================\n\n==================== TestIntegration ====================\n\n================================================================================\nTEST SUMMARY\n================================================================================\nTotal Tests: 20\nPassed: 20\nFailed: 0\nSuccess Rate: 100.0%\n\ud83c\udf89 ALL TESTS PASSED!\n",
        "error": "test_database_initialization (__main__.TestTradeStream)\nTest database initialization. ... 2025-06-22 05:36:43,829 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:43,831 - raspberry_pi.trade_stream - INFO - Database initialized successfully\nok\ntest_get_trade_statistics (__main__.TestTradeStream)\nTest trade statistics calculation. ... 2025-06-22 05:36:43,836 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:43,837 - raspberry_pi.trade_stream - INFO - Database initialized successfully\nok\ntest_process_trade_message (__main__.TestTradeStream)\nTest trade message processing. ... 2025-06-22 05:36:43,842 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:43,843 - raspberry_pi.trade_stream - INFO - Database initialized successfully\nok\n\n----------------------------------------------------------------------\nRan 3 tests in 0.020s\n\nOK\ntest_event_ordering (__main__.TestEventSynchronizer)\nTest event ordering functionality. ... 2025-06-22 05:36:43,848 - raspberry_pi.event_synchronizer - INFO - Registered callback for trade events\nok\ntest_synchronization_stats (__main__.TestEventSynchronizer)\nTest synchronization statistics. ... ok\n\n----------------------------------------------------------------------\nRan 2 tests in 0.010s\n\nOK\ntest_data_quality_metrics (__main__.TestDataValidator)\nTest data quality metrics calculation. ... ok\ntest_invalid_ohlc_data (__main__.TestDataValidator)\nTest validation with invalid OHLC data. ... ok\ntest_ohlcv_validation (__main__.TestDataValidator)\nTest OHLCV data validation. ... ok\n\n----------------------------------------------------------------------\nRan 3 tests in 0.016s\n\nOK\ntest_daily_rate_calculation (__main__.TestFundingMonitor)\nTest daily funding rate calculation. ... 2025-06-22 05:36:43,874 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:43,875 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\nok\ntest_database_initialization (__main__.TestFundingMonitor)\nTest funding monitor database initialization. ... 2025-06-22 05:36:43,880 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:43,881 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\nok\ntest_funding_cost_calculation (__main__.TestFundingMonitor)\nTest funding cost calculation. ... 2025-06-22 05:36:43,886 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:43,887 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\nok\ntest_funding_level_assessment (__main__.TestFundingMonitor)\nTest funding level assessment. ... 2025-06-22 05:36:43,893 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:43,894 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\nok\n\n----------------------------------------------------------------------\nRan 4 tests in 0.025s\n\nOK\ntest_initial_portfolio_state (__main__.TestPaperTrader)\nTest initial portfolio state. ... 2025-06-22 05:36:43,900 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\nok\ntest_place_buy_order (__main__.TestPaperTrader)\nTest placing a buy order. ... 2025-06-22 05:36:43,906 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\n2025-06-22 05:36:43,909 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,909 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,910 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,911 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,911 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,911 - raspberry_pi.risk_manager - ERROR - Error calculating position risk adjustment: 'float' object has no attribute 'get'\n2025-06-22 05:36:43,912 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,912 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - === Portfolio Risk Assessment ===\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Risk Level: LOW\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Volatility Regime: normal_volatility\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Total Exposure: 0.0%\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Portfolio Heat: 0.0%\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Correlation Risk: 0.000\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Concentration Risk: 0.0%\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Volatility Risk: 0.500\n2025-06-22 05:36:43,913 - raspberry_pi.risk_manager - INFO - Max Drawdown Risk: 0.0%\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO - Order book table doesn't exist, will create synthetic order book: no such table: order_books\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO - No order book data found for BTCUSDT, creating synthetic order book from OHLCV\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO - Created synthetic order book: mid=$50000.00, spread=4.0bps\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO - Simulated execution: 0.050000 BTCUSDT @ $50012.50, queue_pos=1, toxic=False, latency=96.6ms\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO - Execution Metrics for BTCUSDT_1750585003907:\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Filled: 0.050000\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Avg Price: $50012.50\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Remaining: 0.000000\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Queue Position: 1\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Toxic Fill: False\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Latency: 96.6ms\n2025-06-22 05:36:43,914 - raspberry_pi.execution_simulator - INFO -   Partial Fills: 1\n2025-06-22 05:36:43,915 - raspberry_pi.paper_trader - INFO - Executed order BTCUSDT_1750585003907: 0.050000 BTCUSDT @ $50012.50\n2025-06-22 05:36:43,915 - raspberry_pi.paper_trader - INFO -   Latency: 96.6ms, Queue Position: 1\n2025-06-22 05:36:43,916 - raspberry_pi.paper_trader - INFO - Placed market buy order: 0.05 BTCUSDT\nok\ntest_place_sell_order (__main__.TestPaperTrader)\nTest placing a sell order. ... 2025-06-22 05:36:43,921 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\n2025-06-22 05:36:43,923 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,923 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,924 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,925 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,925 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,925 - raspberry_pi.risk_manager - ERROR - Error calculating position risk adjustment: 'float' object has no attribute 'get'\n2025-06-22 05:36:43,926 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,926 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - === Portfolio Risk Assessment ===\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Risk Level: LOW\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Volatility Regime: normal_volatility\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Total Exposure: 0.0%\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Portfolio Heat: 0.0%\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Correlation Risk: 0.000\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Concentration Risk: 0.0%\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Volatility Risk: 0.500\n2025-06-22 05:36:43,927 - raspberry_pi.risk_manager - INFO - Max Drawdown Risk: 0.0%\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO - Order book table doesn't exist, will create synthetic order book: no such table: order_books\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO - No order book data found for BTCUSDT, creating synthetic order book from OHLCV\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO - Created synthetic order book: mid=$50000.00, spread=4.0bps\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO - Simulated execution: 0.050000 BTCUSDT @ $50012.50, queue_pos=1, toxic=False, latency=93.8ms\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO - Execution Metrics for BTCUSDT_1750585003922:\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO -   Filled: 0.050000\n2025-06-22 05:36:43,927 - raspberry_pi.execution_simulator - INFO -   Avg Price: $50012.50\n2025-06-22 05:36:43,928 - raspberry_pi.execution_simulator - INFO -   Remaining: 0.000000\n2025-06-22 05:36:43,928 - raspberry_pi.execution_simulator - INFO -   Queue Position: 1\n2025-06-22 05:36:43,928 - raspberry_pi.execution_simulator - INFO -   Toxic Fill: False\n2025-06-22 05:36:43,928 - raspberry_pi.execution_simulator - INFO -   Latency: 93.8ms\n2025-06-22 05:36:43,928 - raspberry_pi.execution_simulator - INFO -   Partial Fills: 1\n2025-06-22 05:36:43,929 - raspberry_pi.paper_trader - INFO - Executed order BTCUSDT_1750585003922: 0.050000 BTCUSDT @ $50012.50\n2025-06-22 05:36:43,929 - raspberry_pi.paper_trader - INFO -   Latency: 93.8ms, Queue Position: 1\n2025-06-22 05:36:43,929 - raspberry_pi.paper_trader - INFO - Placed market buy order: 0.05 BTCUSDT\n2025-06-22 05:36:43,931 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,931 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,932 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,933 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,933 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,933 - raspberry_pi.risk_manager - ERROR - Error calculating position risk adjustment: 'float' object has no attribute 'get'\n2025-06-22 05:36:43,934 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,934 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - === Portfolio Risk Assessment ===\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Risk Level: HIGH\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Volatility Regime: normal_volatility\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Total Exposure: 25.0%\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Portfolio Heat: 25.0%\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Correlation Risk: 1.000\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Concentration Risk: 100.0%\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Volatility Risk: 0.500\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - INFO - Max Drawdown Risk: 50.0%\n2025-06-22 05:36:43,935 - raspberry_pi.risk_manager - WARNING - \u26a0\ufe0f HIGH RISK DETECTED!\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO - Order book table doesn't exist, will create synthetic order book: no such table: order_books\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO - No order book data found for BTCUSDT, creating synthetic order book from OHLCV\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO - Created synthetic order book: mid=$50000.00, spread=4.0bps\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO - Simulated execution: 0.020000 BTCUSDT @ $49987.50, queue_pos=1, toxic=False, latency=76.5ms\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO - Execution Metrics for BTCUSDT_1750585003929:\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Filled: 0.020000\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Avg Price: $49987.50\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Remaining: 0.000000\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Queue Position: 1\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Toxic Fill: False\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Latency: 76.5ms\n2025-06-22 05:36:43,935 - raspberry_pi.execution_simulator - INFO -   Partial Fills: 1\n2025-06-22 05:36:43,936 - raspberry_pi.paper_trader - INFO - Executed order BTCUSDT_1750585003929: 0.020000 BTCUSDT @ $49987.50\n2025-06-22 05:36:43,936 - raspberry_pi.paper_trader - INFO -   Latency: 76.5ms, Queue Position: 1\n2025-06-22 05:36:43,937 - raspberry_pi.paper_trader - INFO - Placed market sell order: 0.02 BTCUSDT\nok\ntest_portfolio_summary (__main__.TestPaperTrader)\nTest portfolio summary generation. ... 2025-06-22 05:36:43,942 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\n2025-06-22 05:36:43,944 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,944 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,945 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,946 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,946 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,946 - raspberry_pi.risk_manager - ERROR - Error calculating position risk adjustment: 'float' object has no attribute 'get'\n2025-06-22 05:36:43,947 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,947 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - === Portfolio Risk Assessment ===\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Risk Level: LOW\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Volatility Regime: normal_volatility\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Total Exposure: 0.0%\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Portfolio Heat: 0.0%\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Correlation Risk: 0.000\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Concentration Risk: 0.0%\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Volatility Risk: 0.500\n2025-06-22 05:36:43,948 - raspberry_pi.risk_manager - INFO - Max Drawdown Risk: 0.0%\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO - Order book table doesn't exist, will create synthetic order book: no such table: order_books\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO - No order book data found for BTCUSDT, creating synthetic order book from OHLCV\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO - Created synthetic order book: mid=$50000.00, spread=4.0bps\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO - Simulated execution: 0.050000 BTCUSDT @ $50012.50, queue_pos=1, toxic=False, latency=92.6ms\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO - Execution Metrics for BTCUSDT_1750585003943:\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Filled: 0.050000\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Avg Price: $50012.50\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Remaining: 0.000000\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Queue Position: 1\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Toxic Fill: False\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Latency: 92.6ms\n2025-06-22 05:36:43,949 - raspberry_pi.execution_simulator - INFO -   Partial Fills: 1\n2025-06-22 05:36:43,950 - raspberry_pi.paper_trader - INFO - Executed order BTCUSDT_1750585003943: 0.050000 BTCUSDT @ $50012.50\n2025-06-22 05:36:43,950 - raspberry_pi.paper_trader - INFO -   Latency: 92.6ms, Queue Position: 1\n2025-06-22 05:36:43,951 - raspberry_pi.paper_trader - INFO - Placed market buy order: 0.05 BTCUSDT\nok\ntest_portfolio_value_calculation (__main__.TestPaperTrader)\nTest portfolio value calculation. ... 2025-06-22 05:36:43,956 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\n2025-06-22 05:36:43,958 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,958 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,959 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,960 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,960 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,960 - raspberry_pi.risk_manager - ERROR - Error calculating position risk adjustment: 'float' object has no attribute 'get'\n2025-06-22 05:36:43,961 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,961 - raspberry_pi.risk_manager - WARNING - Insufficient data for correlation analysis\n2025-06-22 05:36:43,962 - raspberry_pi.risk_manager - INFO - Loaded price data: 1 periods, 1 symbols\n2025-06-22 05:36:43,962 - raspberry_pi.risk_manager - INFO - === Portfolio Risk Assessment ===\n2025-06-22 05:36:43,962 - raspberry_pi.risk_manager - INFO - Risk Level: LOW\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Volatility Regime: normal_volatility\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Total Exposure: 0.0%\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Portfolio Heat: 0.0%\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Correlation Risk: 0.000\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Concentration Risk: 0.0%\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Volatility Risk: 0.500\n2025-06-22 05:36:43,963 - raspberry_pi.risk_manager - INFO - Max Drawdown Risk: 0.0%\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO - Order book table doesn't exist, will create synthetic order book: no such table: order_books\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO - No order book data found for BTCUSDT, creating synthetic order book from OHLCV\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO - Created synthetic order book: mid=$50000.00, spread=4.0bps\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO - Simulated execution: 0.050000 BTCUSDT @ $50012.50, queue_pos=1, toxic=False, latency=80.1ms\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO - Execution Metrics for BTCUSDT_1750585003957:\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Filled: 0.050000\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Avg Price: $50012.50\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Remaining: 0.000000\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Queue Position: 1\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Toxic Fill: False\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Latency: 80.1ms\n2025-06-22 05:36:43,963 - raspberry_pi.execution_simulator - INFO -   Partial Fills: 1\n2025-06-22 05:36:43,964 - raspberry_pi.paper_trader - INFO - Executed order BTCUSDT_1750585003957: 0.050000 BTCUSDT @ $50012.50\n2025-06-22 05:36:43,964 - raspberry_pi.paper_trader - INFO -   Latency: 80.1ms, Queue Position: 1\n2025-06-22 05:36:43,965 - raspberry_pi.paper_trader - INFO - Placed market buy order: 0.05 BTCUSDT\nok\ntest_position_size_calculation (__main__.TestPaperTrader)\nTest position size calculation. ... 2025-06-22 05:36:43,970 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\nok\n\n----------------------------------------------------------------------\nRan 6 tests in 0.077s\n\nOK\ntest_data_flow_integration (__main__.TestIntegration)\nTest data flow between components. ... 2025-06-22 05:36:43,976 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:43,976 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:43,989 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:43,990 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:43,996 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\n2025-06-22 05:36:43,996 - raspberry_pi.trade_stream - INFO - Flushed 1 trades to database\nok\ntest_database_compatibility (__main__.TestIntegration)\nTest that all components can work with the same database. ... 2025-06-22 05:36:44,001 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:44,002 - raspberry_pi.trade_stream - INFO - Database initialized successfully\n2025-06-22 05:36:44,015 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:44,016 - raspberry_pi.funding_monitor - INFO - Funding rates database initialized successfully\n2025-06-22 05:36:44,022 - raspberry_pi.paper_trader - INFO - Paper trading database initialized successfully\nok\n\n----------------------------------------------------------------------\nRan 2 tests in 0.051s\n\nOK\n"
      },
      "test_features": {
        "status": "passed",
        "output": "",
        "error": "2025-06-22 05:36:44,753 - ERROR - An unexpected error occurred while trying to load original function: name '__file__' is not defined\ns\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nOK (skipped=1)\n"
      },
      "test_news_harvest": {
        "status": "passed",
        "output": "",
        "error": "2025-06-22 05:36:44,849 - INFO - \ud83d\ude80 Starting News Harvest Tests\n2025-06-22 05:36:44,849 - INFO - ==================================================\n2025-06-22 05:36:44,849 - INFO - \ud83d\udd0d Test 1: Testing news database initialization...\n2025-06-22 05:36:44,983 - INFO - News database tables initialized at /Users/zach/Documents/Git/TickerML/data/db/crypto_news.db\n2025-06-22 05:36:44,983 - INFO - \u2705 News database tables created successfully\n2025-06-22 05:36:44,983 - INFO - ------------------------------\n2025-06-22 05:36:44,983 - INFO - \ud83d\udd0d Test 2: Testing sentiment analysis...\n2025-06-22 05:36:44,983 - ERROR - \u274c Sentiment analysis test failed: cannot import name 'analyze_sentiment_basic' from 'raspberry_pi.news_harvest' (/Users/zach/Documents/Git/TickerML/raspberry_pi/news_harvest.py)\n2025-06-22 05:36:44,983 - INFO - ------------------------------\n2025-06-22 05:36:44,983 - INFO - \ud83d\udd0d Test 3: Testing news fetching configuration...\n2025-06-22 05:36:44,983 - INFO - NewsAPI Key configured: Yes\n2025-06-22 05:36:44,983 - INFO - Symbols configured: ['BTCUSD', 'ETHUSD']\n2025-06-22 05:36:44,983 - INFO - Testing news fetch for BTCUSD...\n2025-06-22 05:36:45,216 - ERROR - Error fetching news for BTCUSD: 429 Client Error:  for url: https://newsapi.org/v2/everything?q=Bitcoin&from=2025-06-22T04%3A36%3A44.983921&to=2025-06-22T05%3A36%3A44.983921&sortBy=publishedAt&language=en&apiKey=57307964fd22448b88b7c2def01a90dd&pageSize=50\n2025-06-22 05:36:45,218 - INFO - Fetched 0 articles\n2025-06-22 05:36:45,218 - INFO - \u2705 News fetching configuration looks good\n2025-06-22 05:36:45,218 - INFO - ------------------------------\n2025-06-22 05:36:45,218 - INFO - \ud83d\udd0d Test 4: Testing news storage...\n2025-06-22 05:36:45,219 - ERROR - \u274c Failed to store article\n2025-06-22 05:36:45,219 - INFO - ------------------------------\n2025-06-22 05:36:45,219 - INFO - \ud83d\udd0d Test 5: Testing full harvest process...\n2025-06-22 05:36:45,219 - INFO - Testing full harvest for BTCUSD...\n2025-06-22 05:36:45,219 - INFO - Harvesting news for BTCUSD\n2025-06-22 05:36:45,446 - ERROR - Error fetching news for BTCUSD: 429 Client Error:  for url: https://newsapi.org/v2/everything?q=Bitcoin&from=2025-06-21T05%3A36%3A45.219462&to=2025-06-22T05%3A36%3A45.219462&sortBy=publishedAt&language=en&apiKey=57307964fd22448b88b7c2def01a90dd&pageSize=50\n2025-06-22 05:36:45,446 - INFO - No new articles found or processed for BTCUSD\n2025-06-22 05:36:45,446 - INFO - Articles in database for BTCUSD: 58\n2025-06-22 05:36:45,446 - INFO - Sentiment records for BTCUSD: 0\n2025-06-22 05:36:45,446 - INFO - \u2705 Full harvest process completed\n2025-06-22 05:36:45,446 - INFO - ------------------------------\n2025-06-22 05:36:45,446 - INFO - ==================================================\n2025-06-22 05:36:45,446 - INFO - \ud83d\udcca Test Results: 3 passed, 2 failed\n2025-06-22 05:36:45,446 - WARNING - \u26a0\ufe0f  2 tests failed\n2025-06-22 05:36:45,446 - INFO - \n\ud83d\udccb Next Steps:\n2025-06-22 05:36:45,446 - INFO - 1. Set up NewsAPI key in config/config.yaml for full functionality\n2025-06-22 05:36:45,446 - INFO - 2. Add to crontab for automated harvesting:\n2025-06-22 05:36:45,446 - INFO -    */15 * * * * cd /Users/zach/Documents/Git/TickerML && python raspberry_pi/news_harvest.py >> logs/news_harvest.log 2>&1\n2025-06-22 05:36:45,446 - INFO - 3. Monitor logs: tail -f logs/news_harvest.log\n"
      },
      "test_paper_trading": {
        "status": "failed",
        "output": "Running Paper Trading Engine Tests...\n\nPaper Trading Tests Complete:\n  Tests Run: 14\n  Failures: 3\n  Errors: 0\n  Success Rate: 78.6%\n",
        "error": "test_commission_and_fees (__main__.TestPaperTradingEngine)\nTest commission and fee calculations ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_execution_simulator_integration (__main__.TestPaperTradingEngine)\nTest integration with execution simulator ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_initial_portfolio_state (__main__.TestPaperTradingEngine)\nTest initial portfolio configuration ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_minimum_order_size (__main__.TestPaperTradingEngine)\nTest minimum order size enforcement ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nok\ntest_order_placement_validation (__main__.TestPaperTradingEngine)\nTest order placement with validation ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nERROR:raspberry_pi.risk_manager:Error calculating position risk adjustment: 'float' object has no attribute 'get'\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nINFO:raspberry_pi.risk_manager:=== Portfolio Risk Assessment ===\nINFO:raspberry_pi.risk_manager:Risk Level: LOW\nINFO:raspberry_pi.risk_manager:Volatility Regime: normal_volatility\nINFO:raspberry_pi.risk_manager:Total Exposure: 0.0%\nINFO:raspberry_pi.risk_manager:Portfolio Heat: 0.0%\nINFO:raspberry_pi.risk_manager:Correlation Risk: 0.000\nINFO:raspberry_pi.risk_manager:Concentration Risk: 0.0%\nINFO:raspberry_pi.risk_manager:Volatility Risk: 0.500\nINFO:raspberry_pi.risk_manager:Max Drawdown Risk: 0.0%\nINFO:raspberry_pi.execution_simulator:Order book table doesn't exist, will create synthetic order book: no such table: order_books\nINFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nERROR:raspberry_pi.execution_simulator:Error getting order book for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.execution_simulator:Emergency fallback failed: no such table: ohlcv\nERROR:raspberry_pi.execution_simulator:No order book data available for BTCUSD\nINFO:raspberry_pi.execution_simulator:Execution Metrics for BTCUSD_1750585005941:\nINFO:raspberry_pi.execution_simulator:  Filled: 0.000000\nINFO:raspberry_pi.execution_simulator:  Avg Price: $0.00\nINFO:raspberry_pi.execution_simulator:  Remaining: 0.010000\nINFO:raspberry_pi.execution_simulator:  Queue Position: 0\nINFO:raspberry_pi.execution_simulator:  Toxic Fill: False\nINFO:raspberry_pi.execution_simulator:  Latency: 0.0ms\nINFO:raspberry_pi.execution_simulator:  Partial Fills: 0\nWARNING:raspberry_pi.paper_trader:Order BTCUSD_1750585005941 rejected: no fills possible\nINFO:raspberry_pi.paper_trader:Placed market buy order: 0.01 BTCUSD\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nERROR:raspberry_pi.risk_manager:Error calculating position risk adjustment: 'float' object has no attribute 'get'\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Execution failed on sql '\n                SELECT timestamp, symbol, close\n                FROM ohlcv \n                WHERE symbol IN (?,?) AND timestamp >= ?\n                ORDER BY timestamp ASC\n            ': no such table: ohlcv\nINFO:raspberry_pi.risk_manager:=== Portfolio Risk Assessment ===\nINFO:raspberry_pi.risk_manager:Risk Level: LOW\nINFO:raspberry_pi.risk_manager:Volatility Regime: normal_volatility\nINFO:raspberry_pi.risk_manager:Total Exposure: 0.0%\nINFO:raspberry_pi.risk_manager:Portfolio Heat: 0.0%\nINFO:raspberry_pi.risk_manager:Correlation Risk: 0.000\nINFO:raspberry_pi.risk_manager:Concentration Risk: 0.0%\nINFO:raspberry_pi.risk_manager:Volatility Risk: 0.500\nINFO:raspberry_pi.risk_manager:Max Drawdown Risk: 0.0%\nINFO:raspberry_pi.execution_simulator:Order book table doesn't exist, will create synthetic order book: no such table: order_books\nINFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nERROR:raspberry_pi.execution_simulator:Error getting order book for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.execution_simulator:Emergency fallback failed: no such table: ohlcv\nERROR:raspberry_pi.execution_simulator:No order book data available for BTCUSD\nINFO:raspberry_pi.execution_simulator:Execution Metrics for BTCUSD_1750585005943:\nINFO:raspberry_pi.execution_simulator:  Filled: 0.000000\nINFO:raspberry_pi.execution_simulator:  Avg Price: $0.00\nINFO:raspberry_pi.execution_simulator:  Remaining: 1000.000000\nINFO:raspberry_pi.execution_simulator:  Queue Position: 0\nINFO:raspberry_pi.execution_simulator:  Toxic Fill: False\nINFO:raspberry_pi.execution_simulator:  Latency: 0.0ms\nINFO:raspberry_pi.execution_simulator:  Partial Fills: 0\nWARNING:raspberry_pi.paper_trader:Order BTCUSD_1750585005943 rejected: no fills possible\nINFO:raspberry_pi.paper_trader:Placed market buy order: 1000 BTCUSD\nFAIL\ntest_portfolio_summary (__main__.TestPaperTradingEngine)\nTest portfolio summary generation ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_portfolio_value_calculation (__main__.TestPaperTradingEngine)\nTest portfolio value calculation ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nFAIL\ntest_position_sizing (__main__.TestPaperTradingEngine)\nTest position sizing calculations ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nERROR:raspberry_pi.paper_trader:Failed to get current price for BTCUSD: no such table: ohlcv\nFAIL\ntest_risk_management_integration (__main__.TestPaperTradingEngine)\nTest integration with risk management system ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_stop_loss_and_take_profit_levels (__main__.TestPaperTradingEngine)\nTest stop loss and take profit configuration ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_maximum_drawdown_protection (__main__.TestPaperTradingRiskControls)\nTest maximum drawdown protection ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_portfolio_heat_calculation (__main__.TestPaperTradingRiskControls)\nTest portfolio heat (total exposure) calculation ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_position_concentration_limits (__main__.TestPaperTradingRiskControls)\nTest position concentration limits ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\ntest_sharpe_ratio_calculation (__main__.TestPaperTradingRiskControls)\nTest Sharpe ratio calculation ... INFO:raspberry_pi.paper_trader:Paper trading database initialized successfully\nok\n\n======================================================================\nFAIL: test_order_placement_validation (__main__.TestPaperTradingEngine)\nTest order placement with validation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_paper_trading.py\", line 113, in test_order_placement_validation\n    self.assertEqual(large_order_id, \"\")\nAssertionError: 'BTCUSD_1750585005943' != ''\n- BTCUSD_1750585005943\n+ \n\n\n======================================================================\nFAIL: test_portfolio_value_calculation (__main__.TestPaperTradingEngine)\nTest portfolio value calculation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_paper_trading.py\", line 71, in test_portfolio_value_calculation\n    self.assertGreater(portfolio_value, 10000.0)\nAssertionError: 10000.0 not greater than 10000.0\n\n======================================================================\nFAIL: test_position_sizing (__main__.TestPaperTradingEngine)\nTest position sizing calculations\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_paper_trading.py\", line 85, in test_position_sizing\n    self.assertLess(small_position, position_size)\nAssertionError: 0.0 not less than 0.0\n\n----------------------------------------------------------------------\nRan 14 tests in 0.089s\n\nFAILED (failures=3)\n",
        "return_code": 1
      },
      "test_orderbook_collector": {
        "status": "failed",
        "output": "",
        "error": "2025-06-22 05:36:46,134 - INFO - Starting order book collector test suite\ntest_data_storage (__main__.TestOrderBookCollector)\nTest order book data storage ... 2025-06-22 05:36:46,144 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,145 - INFO - Order book database tables initialized\nERROR\ntest_database_initialization (__main__.TestOrderBookCollector)\nTest database table creation ... 2025-06-22 05:36:46,150 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,152 - INFO - Order book database tables initialized\nFAIL\ntest_depth_calculation (__main__.TestOrderBookCollector)\nTest order book depth calculation ... 2025-06-22 05:36:46,157 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,159 - INFO - Order book database tables initialized\nok\ntest_error_handling (__main__.TestOrderBookCollector)\nTest error handling in various scenarios ... 2025-06-22 05:36:46,164 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,165 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,165 - WARNING - Empty order book for BTCUSD\nok\ntest_imbalance_calculation (__main__.TestOrderBookCollector)\nTest order book imbalance calculation ... 2025-06-22 05:36:46,178 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,179 - INFO - Order book database tables initialized\nok\ntest_microprice_calculation (__main__.TestOrderBookCollector)\nTest microprice calculation ... 2025-06-22 05:36:46,185 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,186 - INFO - Order book database tables initialized\nFAIL\ntest_order_book_level_creation (__main__.TestOrderBookCollector)\nTest OrderBookLevel data structure ... 2025-06-22 05:36:46,191 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,193 - INFO - Order book database tables initialized\nERROR\ntest_order_book_snapshot_creation (__main__.TestOrderBookCollector)\nTest OrderBookSnapshot creation with microstructure features ... 2025-06-22 05:36:46,198 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,199 - INFO - Order book database tables initialized\nERROR\ntest_queue_position_estimation (__main__.TestOrderBookCollector)\nTest queue position estimation for execution simulation ... 2025-06-22 05:36:46,204 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,206 - INFO - Order book database tables initialized\nERROR\ntest_spread_calculation (__main__.TestOrderBookCollector)\nTest spread calculation in basis points ... 2025-06-22 05:36:46,211 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,212 - INFO - Order book database tables initialized\nFAIL\ntest_subscription_message_format (__main__.TestOrderBookCollector)\nTest WebSocket subscription message format ... 2025-06-22 05:36:46,217 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,219 - INFO - Order book database tables initialized\nFAIL\ntest_websocket_connection (__main__.TestOrderBookCollector)\nTest WebSocket connection setup ... 2025-06-22 05:36:46,224 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,225 - INFO - Order book database tables initialized\nERROR\ntest_data_flow_integration (__main__.TestOrderBookIntegration)\nTest complete data flow from WebSocket to database ... 2025-06-22 05:36:46,234 - INFO - Order book database tables initialized\n2025-06-22 05:36:46,235 - INFO - Order book database tables initialized\nERROR\n\n======================================================================\nERROR: test_data_storage (__main__.TestOrderBookCollector)\nTest order book data storage\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 218, in test_data_storage\n    snapshot = OrderBookSnapshot(\nTypeError: OrderBookSnapshot.__init__() got an unexpected keyword argument 'timestamp'\n\n======================================================================\nERROR: test_order_book_level_creation (__main__.TestOrderBookCollector)\nTest OrderBookLevel data structure\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 95, in test_order_book_level_creation\n    self.assertEqual(level.timestamp, timestamp)\nAttributeError: 'OrderBookLevel' object has no attribute 'timestamp'\n\n======================================================================\nERROR: test_order_book_snapshot_creation (__main__.TestOrderBookCollector)\nTest OrderBookSnapshot creation with microstructure features\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 114, in test_order_book_snapshot_creation\n    snapshot = OrderBookSnapshot(\nTypeError: OrderBookSnapshot.__init__() got an unexpected keyword argument 'timestamp'\n\n======================================================================\nERROR: test_queue_position_estimation (__main__.TestOrderBookCollector)\nTest queue position estimation for execution simulation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 193, in test_queue_position_estimation\n    cursor.execute('''\nsqlite3.OperationalError: table order_books has no column named microprice\n\n======================================================================\nERROR: test_websocket_connection (__main__.TestOrderBookCollector)\nTest WebSocket connection setup\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/miniconda3/lib/python3.10/unittest/mock.py\", line 1379, in patched\n    return func(*newargs, **newkeywargs)\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 303, in test_websocket_connection\n    self.collector._connect()\nAttributeError: 'BinanceOrderBookCollector' object has no attribute '_connect'\n\n======================================================================\nERROR: test_data_flow_integration (__main__.TestOrderBookIntegration)\nTest complete data flow from WebSocket to database\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 402, in test_data_flow_integration\n    success = collector._store_order_book_snapshot(snapshot)\nAttributeError: 'BinanceOrderBookCollector' object has no attribute '_store_order_book_snapshot'\n\n======================================================================\nFAIL: test_database_initialization (__main__.TestOrderBookCollector)\nTest database table creation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 84, in test_database_initialization\n    self.assertIn(col, columns, f\"Column {col} should exist in order_books table\")\nAssertionError: 'microprice' not found in ['id', 'timestamp', 'exchange', 'symbol', 'bids', 'asks', 'mid_price', 'spread', 'spread_bps', 'imbalance', 'created_at'] : Column microprice should exist in order_books table\n\n======================================================================\nFAIL: test_microprice_calculation (__main__.TestOrderBookCollector)\nTest microprice calculation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 168, in test_microprice_calculation\n    self.assertLess(microprice, expected_mid, \"More bid quantity should pull microprice toward bid\")\nAssertionError: 100.13333333333333 not less than 100.1 : More bid quantity should pull microprice toward bid\n\n======================================================================\nFAIL: test_spread_calculation (__main__.TestOrderBookCollector)\nTest spread calculation in basis points\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 253, in test_spread_calculation\n    self.assertAlmostEqual(spread_bps, 99.95, places=1,\nAssertionError: 9.995002498750056 != 99.95 within 1 places (89.95499750124995 difference) : Spread calculation should be accurate\n\n======================================================================\nFAIL: test_subscription_message_format (__main__.TestOrderBookCollector)\nTest WebSocket subscription message format\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_orderbook_collector.py\", line 333, in test_subscription_message_format\n    self.assertIn(symbol_stream, streams)\nAssertionError: 'btcusd@depth20@100ms' not found in ['btcusd@depth@100ms', 'ethusd@depth@100ms']\n\n----------------------------------------------------------------------\nRan 13 tests in 0.101s\n\nFAILED (failures=4, errors=6)\n2025-06-22 05:36:46,236 - INFO - Order Book Collector Tests Complete:\n2025-06-22 05:36:46,236 - INFO -   Tests Run: 13\n2025-06-22 05:36:46,237 - INFO -   Failures: 4\n2025-06-22 05:36:46,237 - INFO -   Errors: 6\n2025-06-22 05:36:46,237 - INFO -   Success Rate: 23.1%\n",
        "return_code": 1
      },
      "test_risk_manager": {
        "status": "failed",
        "output": "Running Advanced Risk Manager Tests...\n\nRisk Manager Tests Complete:\n  Tests Run: 16\n  Failures: 2\n  Errors: 0\n  Success Rate: 87.5%\n",
        "error": "test_asset_sector_classification (__main__.TestAdvancedRiskManager)\nTest asset sector classification ... ok\ntest_concentration_risk_assessment (__main__.TestAdvancedRiskManager)\nTest concentration risk assessment ... FAIL\ntest_correlation_matrix_calculation (__main__.TestAdvancedRiskManager)\nTest correlation matrix calculation ... INFO:raspberry_pi.risk_manager:Loaded price data: 100 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nok\ntest_correlation_risk_calculation (__main__.TestAdvancedRiskManager)\nTest correlation risk calculation ... INFO:raspberry_pi.risk_manager:Loaded price data: 100 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nok\ntest_portfolio_heat_calculation (__main__.TestAdvancedRiskManager)\nTest portfolio heat calculation ... ok\ntest_portfolio_risk_assessment (__main__.TestAdvancedRiskManager)\nTest comprehensive portfolio risk assessment ... INFO:raspberry_pi.risk_manager:Loaded price data: 100 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 23 periods, 2 symbols\nok\ntest_position_limits_checking (__main__.TestAdvancedRiskManager)\nTest position limits checking ... INFO:raspberry_pi.risk_manager:Loaded price data: 100 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 23 periods, 2 symbols\nFAIL\ntest_position_risk_adjustment (__main__.TestAdvancedRiskManager)\nTest position size adjustment based on correlation ... INFO:raspberry_pi.risk_manager:Loaded price data: 100 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nINFO:raspberry_pi.risk_manager:Position size adjustment for ETHUSD: 0.551 (avg correlation: 0.897)\nok\ntest_price_data_loading (__main__.TestAdvancedRiskManager)\nTest price data loading for correlation analysis ... INFO:raspberry_pi.risk_manager:Loaded price data: 23 periods, 2 symbols\nok\ntest_risk_limit_configuration (__main__.TestAdvancedRiskManager)\nTest risk limit configuration ... ok\ntest_risk_metrics_logging (__main__.TestAdvancedRiskManager)\nTest risk metrics logging ... INFO:raspberry_pi.risk_manager:Loaded price data: 23 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:=== Portfolio Risk Assessment ===\nINFO:raspberry_pi.risk_manager:Risk Level: HIGH\nINFO:raspberry_pi.risk_manager:Volatility Regime: extreme_volatility\nINFO:raspberry_pi.risk_manager:Total Exposure: 50.0%\nINFO:raspberry_pi.risk_manager:Portfolio Heat: 50.0%\nINFO:raspberry_pi.risk_manager:Correlation Risk: 0.000\nINFO:raspberry_pi.risk_manager:Concentration Risk: 100.0%\nINFO:raspberry_pi.risk_manager:Volatility Risk: 1.000\nINFO:raspberry_pi.risk_manager:Max Drawdown Risk: 100.0%\nWARNING:raspberry_pi.risk_manager:\u26a0\ufe0f HIGH RISK DETECTED!\nok\ntest_volatility_multipliers (__main__.TestAdvancedRiskManager)\nTest volatility regime multipliers ... ok\ntest_volatility_regime_detection (__main__.TestAdvancedRiskManager)\nTest volatility regime detection ... INFO:raspberry_pi.risk_manager:Loaded price data: 23 periods, 2 symbols\nok\ntest_conservative_defaults (__main__.TestRiskManagerRealism)\nTest that default risk limits are conservative ... ok\ntest_correlation_matrix_stability (__main__.TestRiskManagerRealism)\nTest correlation matrix numerical stability ... ERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Out of bounds nanosecond timestamp: 57371-03-09 08:40:00\nWARNING:raspberry_pi.risk_manager:Insufficient data for correlation analysis\nok\ntest_emergency_risk_scenarios (__main__.TestRiskManagerRealism)\nTest risk management in emergency scenarios ... ERROR:raspberry_pi.risk_manager:Error loading price data for correlation: Out of bounds nanosecond timestamp: 57371-03-09 08:40:00\nok\n\n======================================================================\nFAIL: test_concentration_risk_assessment (__main__.TestAdvancedRiskManager)\nTest concentration risk assessment\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_risk_manager.py\", line 205, in test_concentration_risk_assessment\n    self.assertGreater(concentration_risk_high, concentration_risk)\nAssertionError: 1.0 not greater than 1.0\n\n======================================================================\nFAIL: test_position_limits_checking (__main__.TestAdvancedRiskManager)\nTest position limits checking\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_risk_manager.py\", line 285, in test_position_limits_checking\n    self.assertTrue(allowed, f\"Reasonable position should be allowed: {reason}\")\nAssertionError: False is not true : Reasonable position should be allowed: Exceeds single position limit (7.5%)\n\n----------------------------------------------------------------------\nRan 16 tests in 0.039s\n\nFAILED (failures=2)\n",
        "return_code": 1
      },
      "test_data_collection": {
        "status": "failed",
        "output": "\n\ud83d\udd04 Run continuous collection test? (y/N): ",
        "error": "2025-06-22 05:36:47,219 - INFO - Loaded 'binance_api_base' from config: https://api.binance.us/api/v3\n2025-06-22 05:36:47,219 - INFO - Loaded 'db_path' from config: data/db/crypto_data.db\n2025-06-22 05:36:47,219 - INFO - Loaded 'dumps_path' from config: data/dumps\n2025-06-22 05:36:47,219 - INFO - Loaded 'symbols' from config: ['BTCUSD', 'ETHUSD']\n2025-06-22 05:36:47,219 - INFO - \ud83d\ude80 Starting TickerML Data Collection Pipeline Tests\n2025-06-22 05:36:47,219 - INFO - ============================================================\n2025-06-22 05:36:47,219 - INFO - \n2025-06-22 05:36:47,220 - INFO - \ud83d\udd0d Test 1: Testing API connections...\n2025-06-22 05:36:47,310 - INFO - \u2705 Binance.US API ping successful\n2025-06-22 05:36:47,395 - INFO - \u2705 Binance.US klines data received: OHLCV = ['102500.00000000', '102500.00000000', '102500.00000000', '102500.00000000', '0.00000000']\n2025-06-22 05:36:47,475 - INFO - \u2705 CoinGecko API working: BTC=$102398, ETH=$2257.52\n2025-06-22 05:36:47,475 - INFO - \u2705 Primary API (Binance.US) is working\n2025-06-22 05:36:47,476 - INFO - \n2025-06-22 05:36:47,476 - INFO - \ud83d\udd0d Test 2: Testing database setup...\n2025-06-22 05:36:47,481 - WARNING - database.ohlcv_path not found in config. Using default.\n2025-06-22 05:36:47,481 - INFO - Loaded data.binance_api_base from config: https://api.binance.us/api/v3\n2025-06-22 05:36:47,481 - INFO - Loaded data.symbols from config: ['BTCUSD', 'ETHUSD']\n2025-06-22 05:36:47,481 - INFO - Enhanced database schema initialized for high-frequency data collection\n2025-06-22 05:36:47,481 - INFO - Database initialized at /Users/zach/Documents/Git/TickerML/data/db/crypto_ohlcv.db\n2025-06-22 05:36:47,481 - INFO - \u2705 Database initialized successfully\n2025-06-22 05:36:47,481 - INFO - Stored data for TESTUSD at 2025-06-22 05:36:47.481000\n2025-06-22 05:36:47,482 - INFO - \u2705 Test data stored successfully\n2025-06-22 05:36:47,483 - INFO - \u2705 Data verification successful: 1 records found\n2025-06-22 05:36:47,483 - INFO - \n2025-06-22 05:36:47,483 - INFO - \ud83d\udd0d Test 3: Testing data harvesting...\n2025-06-22 05:36:47,483 - INFO -    Testing BTCUSD...\n2025-06-22 05:36:47,553 - INFO - \u2705 BTCUSD data from Binance.US: $102500.00\n2025-06-22 05:36:47,553 - INFO -    \u2705 BTCUSD data fetched: Close=$102500.00\n2025-06-22 05:36:47,553 - INFO -    \u2705 BTCUSD data stored\n2025-06-22 05:36:47,553 - INFO -    Testing ETHUSD...\n2025-06-22 05:36:47,661 - INFO - \u2705 ETHUSD data from Binance.US: $2255.52\n2025-06-22 05:36:47,661 - INFO -    \u2705 ETHUSD data fetched: Close=$2255.52\n2025-06-22 05:36:47,662 - INFO -    \u2705 ETHUSD data stored\n2025-06-22 05:36:47,662 - INFO - \u2705 All symbols harvested successfully\n2025-06-22 05:36:47,662 - INFO - \n2025-06-22 05:36:47,662 - INFO - \ud83d\udd0d Test 4: Testing data export...\n2025-06-22 05:36:47,667 - WARNING - database.ohlcv_path not found in config. Using default: /Users/zach/Documents/Git/TickerML/data/db/crypto_ohlcv.db\n2025-06-22 05:36:47,667 - INFO - Loaded paths.data_dumps from config: data/dumps\n2025-06-22 05:36:47,667 - INFO - Loaded data.symbols from config: ['BTCUSD', 'ETHUSD']\n2025-06-22 05:36:47,667 - INFO - Exporting data from 2025-06-21 05:36:47.667282 to 2025-06-22 05:36:47.667282\n2025-06-22 05:36:47,669 - INFO - Exported 85 records for BTCUSD to BTCUSD_2025-06-22.csv\n2025-06-22 05:36:47,670 - INFO - Exported 85 records for ETHUSD to ETHUSD_2025-06-22.csv\n2025-06-22 05:36:47,675 - INFO - Exported 935 combined records to combined_2025-06-22.csv\n2025-06-22 05:36:47,675 - INFO - ETL export completed successfully\n2025-06-22 05:36:47,675 - INFO - \u2705 Export successful: 6 CSV files created\n2025-06-22 05:36:47,675 - INFO -    \ud83d\udcc4 BTCUSD_2025-06-22.csv: 85 records\n2025-06-22 05:36:47,677 - INFO -    \ud83d\udcc4 combined_2025-06-22.csv: 935 records\n2025-06-22 05:36:47,677 - INFO -    \ud83d\udcc4 combined_2025-06-19.csv: 4 records\n2025-06-22 05:36:47,677 - INFO -    \ud83d\udcc4 BTCUSD_2025-06-19.csv: 1 records\n2025-06-22 05:36:47,678 - INFO -    \ud83d\udcc4 ETHUSD_2025-06-22.csv: 85 records\n2025-06-22 05:36:47,678 - INFO -    \ud83d\udcc4 ETHUSD_2025-06-19.csv: 1 records\n2025-06-22 05:36:47,678 - INFO - \n2025-06-22 05:36:47,678 - INFO - \ud83d\udd0d Test 5: Testing database queries...\n2025-06-22 05:36:47,678 - INFO - \u2705 Total records in database: 9\n2025-06-22 05:36:47,679 - INFO -    \ud83d\udcca BTCUSD: 3 records\n2025-06-22 05:36:47,679 - INFO -    \ud83d\udcca ETHUSD: 3 records\n2025-06-22 05:36:47,679 - WARNING - \u26a0\ufe0f  No recent data found (last hour)\n2025-06-22 05:36:47,679 - INFO - \n2025-06-22 05:36:47,679 - INFO - \ud83d\udd0d Test 6: Testing dashboard data availability...\n2025-06-22 05:36:47,679 - WARNING - \u26a0\ufe0f  BTCUSD: No data available for dashboard (last 24h)\n2025-06-22 05:36:47,679 - WARNING - \u26a0\ufe0f  ETHUSD: No data available for dashboard (last 24h)\n2025-06-22 05:36:47,680 - INFO - \n2025-06-22 05:36:47,680 - INFO - \ud83d\udccb TEST SUMMARY\n2025-06-22 05:36:47,680 - INFO - ============================================================\n2025-06-22 05:36:47,680 - INFO - \u2705 PASS - API Connection\n2025-06-22 05:36:47,680 - INFO - \u2705 PASS - Database Setup\n2025-06-22 05:36:47,680 - INFO - \u2705 PASS - Data Harvesting\n2025-06-22 05:36:47,680 - INFO - \u2705 PASS - Data Export\n2025-06-22 05:36:47,680 - INFO - \u2705 PASS - Database Queries\n2025-06-22 05:36:47,680 - INFO - \u2705 PASS - Dashboard Data\n2025-06-22 05:36:47,680 - INFO - \n2025-06-22 05:36:47,680 - INFO - \ud83c\udfaf Results: 6/6 tests passed\n2025-06-22 05:36:47,680 - INFO - \ud83c\udf89 All tests passed! Data collection pipeline is ready.\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_data_collection.py\", line 456, in <module>\n    main() \n  File \"/Users/zach/Documents/Git/TickerML/tests/test_data_collection.py\", line 440, in main\n    response = input(\"\\n\ud83d\udd04 Run continuous collection test? (y/N): \").strip().lower()\nEOFError: EOF when reading a line\n",
        "return_code": 1
      },
      "test_execution_sim": {
        "status": "passed",
        "output": "Running Advanced Execution Simulator Tests...\n\nExecution Simulator Tests Complete:\n  Tests Run: 14\n  Failures: 0\n  Errors: 0\n  Success Rate: 100.0%\n",
        "error": "test_cumulative_volume_calculation (__main__.TestAdvancedExecutionSimulator)\nTest cumulative volume calculation for queue position ... ok\ntest_exchange_latency_simulation (__main__.TestAdvancedExecutionSimulator)\nTest exchange-specific latency simulation ... ok\ntest_execution_result_logging (__main__.TestAdvancedExecutionSimulator)\nTest execution result logging ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nINFO:raspberry_pi.execution_simulator:Simulated execution: 0.010000 BTCUSD @ $51528.33, queue_pos=1, toxic=False, latency=81.0ms\nINFO:raspberry_pi.execution_simulator:Execution Metrics for TEST_ORDER_001:\nINFO:raspberry_pi.execution_simulator:  Filled: 0.010000\nINFO:raspberry_pi.execution_simulator:  Avg Price: $51528.33\nINFO:raspberry_pi.execution_simulator:  Remaining: 0.000000\nINFO:raspberry_pi.execution_simulator:  Queue Position: 1\nINFO:raspberry_pi.execution_simulator:  Toxic Fill: False\nINFO:raspberry_pi.execution_simulator:  Latency: 81.0ms\nINFO:raspberry_pi.execution_simulator:  Partial Fills: 1\nok\ntest_limit_order_execution (__main__.TestAdvancedExecutionSimulator)\nTest limit order execution simulation ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nINFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nINFO:raspberry_pi.execution_simulator:Simulated execution: 0.010000 BTCUSD @ $51476.83, queue_pos=0, toxic=False, latency=91.2ms\nok\ntest_market_impact_calculation (__main__.TestAdvancedExecutionSimulator)\nTest market impact calculation ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nok\ntest_market_order_execution (__main__.TestAdvancedExecutionSimulator)\nTest market order execution simulation ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nINFO:raspberry_pi.execution_simulator:Simulated execution: 0.010000 BTCUSD @ $51528.33, queue_pos=1, toxic=False, latency=69.2ms\nok\ntest_order_book_retrieval (__main__.TestAdvancedExecutionSimulator)\nTest order book data retrieval ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nok\ntest_partial_fills_simulation (__main__.TestAdvancedExecutionSimulator)\nTest partial fills simulation ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nok\ntest_queue_position_estimation (__main__.TestAdvancedExecutionSimulator)\nTest FIFO queue position estimation ... ok\ntest_synthetic_order_book_creation (__main__.TestAdvancedExecutionSimulator)\nTest synthetic order book creation from OHLCV ... INFO:raspberry_pi.execution_simulator:No order book data found for BTCUSD, creating synthetic order book from OHLCV\nINFO:raspberry_pi.execution_simulator:Created synthetic order book: mid=$51500.00, spread=10.0bps\nok\ntest_toxic_fill_detection (__main__.TestAdvancedExecutionSimulator)\nTest toxic fill detection (queue position > 10) ... ok\ntest_exchange_latency_profiles (__main__.TestExecutionSimulatorRealism)\nTest exchange latency profiles are realistic ... ok\ntest_market_impact_parameters (__main__.TestExecutionSimulatorRealism)\nTest market impact parameters are reasonable ... ok\ntest_toxic_fill_threshold (__main__.TestExecutionSimulatorRealism)\nTest toxic fill threshold configuration ... ok\n\n----------------------------------------------------------------------\nRan 14 tests in 0.015s\n\nOK\n"
      },
      "test_sentiment_no_fallback": {
        "status": "passed",
        "output": "Testing sentiment analysis without fallback...\nTest text: Bitcoin surges to new all-time high amid positive market sentiment\n\n\u2705 Sentiment analysis succeeded: 0.3\nThis means Ollama with Qwen 3 is available and working\n",
        "error": "2025-06-22 05:36:48,166 - INFO - HTTP Request: POST http://localhost:11434/api/chat \"HTTP/1.1 200 OK\"\n"
      },
      "test_sentiment": {
        "status": "passed",
        "output": "Testing Qwen 3 Sentiment Analysis\n==================================================\n\nTest Case 1:\nText: Bitcoin price surges to new all-time high as institutional adoption increases\nSentiment Score: 0.300\nSentiment Label: Positive\n\nTest Case 2:\nText: Cryptocurrency market crashes amid regulatory concerns and investor panic\nSentiment Score: 0.200\nSentiment Label: Positive\n\nTest Case 3:\nText: Ethereum network upgrade completed successfully with minimal disruption\nSentiment Score: 0.100\nSentiment Label: Neutral\n\nTest Case 4:\nText: Mixed signals in crypto market as some coins rise while others fall\nSentiment Score: 0.200\nSentiment Label: Positive\n\n==================================================\nTest completed!\n",
        "error": "2025-06-22 05:36:48,982 - INFO - HTTP Request: POST http://localhost:11434/api/chat \"HTTP/1.1 200 OK\"\n2025-06-22 05:36:48,982 - INFO - Parsed sentiment score 0.3 from response: 0.3...\n2025-06-22 05:36:49,108 - INFO - HTTP Request: POST http://localhost:11434/api/chat \"HTTP/1.1 200 OK\"\n2025-06-22 05:36:49,108 - INFO - Parsed sentiment score 0.2 from response: 0.2...\n2025-06-22 05:36:49,208 - INFO - HTTP Request: POST http://localhost:11434/api/chat \"HTTP/1.1 200 OK\"\n2025-06-22 05:36:49,208 - INFO - Parsed sentiment score 0.1 from response: 0.1...\n2025-06-22 05:36:49,290 - INFO - HTTP Request: POST http://localhost:11434/api/chat \"HTTP/1.1 200 OK\"\n2025-06-22 05:36:49,291 - INFO - Parsed sentiment score 0.2 from response: 0.2...\n"
      },
      "test_performance": {
        "status": "failed",
        "output": "",
        "error": "Traceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_performance.py\", line 33, in <module>\n    from pc.enhanced_features import EnhancedFeatureGenerator\nImportError: cannot import name 'EnhancedFeatureGenerator' from 'pc.enhanced_features' (/Users/zach/Documents/Git/TickerML/pc/enhanced_features.py)\n",
        "return_code": 1
      },
      "test_summary": {
        "status": "passed",
        "output": "\ud83c\udfaf TickerML Data Collection Pipeline - Test Summary\n============================================================\n\u2705 Database: Created and accessible\n\n\ud83d\udcca Data Collection Status:\n   BTCUSD: 236 records\n   ETHUSD: 236 records\n   TESTUSD: 386 records\n   TESTUSDT: 381 records\n   Total: 1239 records\n\n\ud83d\udd50 Recent Data (last hour):\n   BTCUSD: 60 records, latest: 2025-06-22 09:36:00\n   ETHUSD: 60 records, latest: 2025-06-22 09:36:00\n\n\ud83d\udcc1 CSV Exports: 6 files created\n   BTCUSD_2025-06-22.csv: 8.4 KB\n   combined_2025-06-22.csv: 95.9 KB\n   combined_2025-06-19.csv: 0.5 KB\n   BTCUSD_2025-06-19.csv: 0.2 KB\n   ETHUSD_2025-06-22.csv: 8.0 KB\n   ETHUSD_2025-06-19.csv: 0.2 KB\n\n\ud83c\udf10 API Status:\n   Binance.com: \u274c Blocked (geographic restriction)\n   Binance.US: \u2705 Primary API\n   CoinGecko: \u2705 Fallback API\n\n\ud83d\udd27 Component Status:\n   Database Setup: \u2705\n   Data Harvesting: \u2705\n   Data Export: \u2705\n   API Connection: \u2705\n   Error Handling: \u2705\n   Duplicate Prevention: \u2705\n\n\u26a1 Performance:\n   API Response Time: < 1 second\n   Database Insert: < 50ms\n   Export Speed: < 1 second\n   Memory Usage: Minimal\n\n\ud83d\ude80 Next Steps:\n1. Set up automated collection:\n   crontab -e\n   * * * * * cd /Users/zach/Documents/Git/TickerML && python raspberry_pi/harvest.py\n\n2. Start dashboard (after collecting more data):\n   python raspberry_pi/dashboard.py\n\n3. Collect data for 24+ hours before training models\n\n4. Set up PC environment for feature engineering:\n   bash scripts/setup.sh\n\n\u2699\ufe0f  Configuration Notes:\n   - Primary: Binance.US API (https://api.binance.us/api/v3)\n   - Fallback: CoinGecko API (https://api.coingecko.com/api/v3)\n   - Symbols: BTCUSD, ETHUSD (USD pairs)\n   - Collection interval: Every minute\n   - Storage: SQLite database\n   - Export: Daily CSV files\n\n\ud83c\udf89 Data Collection Pipeline is Ready!\n   All core components are working correctly.\n   You can now start automated data collection.\n",
        "error": ""
      },
      "test_enhanced_trading": {
        "status": "failed",
        "output": "Running Enhanced Trading System Tests...\n\nEnhanced Trading Tests Complete:\n  Tests Run: 7\n  Failures: 2\n  Errors: 1\n  Success Rate: 57.1%\n",
        "error": "test_correlation_calculation (__main__.TestEnhancedTradingSystem)\nTest correlation matrix calculation ... INFO:raspberry_pi.risk_manager:Loaded price data: 50 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nok\ntest_execution_simulator_with_order_book (__main__.TestEnhancedTradingSystem)\nTest execution simulator with order book data ... ERROR:raspberry_pi.execution_simulator:Error simulating order execution: unsupported operand type(s) for +=: 'float' and 'str'\nFAIL\ntest_integrated_trading_system (__main__.TestEnhancedTradingSystem)\nTest integrated trading system with all enhancements ... INFO:raspberry_pi.risk_manager:Loaded price data: 50 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (1, 1)\nINFO:raspberry_pi.risk_manager:Loaded price data: 24 periods, 1 symbols\nERROR:raspberry_pi.risk_manager:Error calculating position risk adjustment: 'float' object has no attribute 'get'\nINFO:raspberry_pi.risk_manager:Loaded price data: 24 periods, 1 symbols\nINFO:raspberry_pi.risk_manager:=== Portfolio Risk Assessment ===\nINFO:raspberry_pi.risk_manager:Risk Level: LOW\nINFO:raspberry_pi.risk_manager:Volatility Regime: extreme_volatility\nINFO:raspberry_pi.risk_manager:Total Exposure: 0.0%\nINFO:raspberry_pi.risk_manager:Portfolio Heat: 0.0%\nINFO:raspberry_pi.risk_manager:Correlation Risk: 0.000\nINFO:raspberry_pi.risk_manager:Concentration Risk: 0.0%\nINFO:raspberry_pi.risk_manager:Volatility Risk: 1.000\nINFO:raspberry_pi.risk_manager:Max Drawdown Risk: 0.0%\nERROR:raspberry_pi.execution_simulator:Error simulating order execution: unsupported operand type(s) for +=: 'float' and 'str'\nINFO:raspberry_pi.execution_simulator:Execution Metrics for BTCUSD_1750585011444:\nINFO:raspberry_pi.execution_simulator:  Filled: 0.000000\nINFO:raspberry_pi.execution_simulator:  Avg Price: $0.00\nINFO:raspberry_pi.execution_simulator:  Remaining: 0.010000\nINFO:raspberry_pi.execution_simulator:  Queue Position: 0\nINFO:raspberry_pi.execution_simulator:  Toxic Fill: False\nINFO:raspberry_pi.execution_simulator:  Latency: 0.0ms\nINFO:raspberry_pi.execution_simulator:  Partial Fills: 0\nWARNING:raspberry_pi.paper_trader:Order BTCUSD_1750585011444 rejected: no fills possible\nERROR:raspberry_pi.paper_trader:Failed to store order: no such table: paper_orders\nINFO:raspberry_pi.paper_trader:Placed market buy order: 0.01 BTCUSD\nok\ntest_position_risk_adjustment (__main__.TestEnhancedTradingSystem)\nTest position size adjustment based on correlation ... INFO:raspberry_pi.risk_manager:Loaded price data: 50 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nERROR:raspberry_pi.risk_manager:Error calculating position risk adjustment: 'int' object has no attribute 'get'\nok\ntest_risk_assessment (__main__.TestEnhancedTradingSystem)\nTest comprehensive risk assessment ... INFO:raspberry_pi.risk_manager:Loaded price data: 50 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 24 periods, 2 symbols\nok\ntest_risk_manager_position_limits (__main__.TestEnhancedTradingSystem)\nTest risk manager position limits ... INFO:raspberry_pi.risk_manager:Loaded price data: 50 periods, 2 symbols\nINFO:raspberry_pi.risk_manager:Updated correlation matrix: (2, 2)\nINFO:raspberry_pi.risk_manager:Loaded price data: 24 periods, 2 symbols\nFAIL\ntest_volatility_regime_detection (__main__.TestEnhancedTradingSystem)\nTest volatility regime detection ... INFO:raspberry_pi.risk_manager:Loaded price data: 24 periods, 2 symbols\nERROR\n\n======================================================================\nERROR: test_volatility_regime_detection (__main__.TestEnhancedTradingSystem)\nTest volatility regime detection\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_enhanced_trading.py\", line 233, in test_volatility_regime_detection\n    self.assertIsInstance(regime, self.risk_manager.VolatilityRegime)\nAttributeError: 'AdvancedRiskManager' object has no attribute 'VolatilityRegime'\n\n======================================================================\nFAIL: test_execution_simulator_with_order_book (__main__.TestEnhancedTradingSystem)\nTest execution simulator with order book data\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_enhanced_trading.py\", line 174, in test_execution_simulator_with_order_book\n    self.assertGreater(result.filled_quantity, 0, \"Should fill some quantity\")\nAssertionError: 0.0 not greater than 0 : Should fill some quantity\n\n======================================================================\nFAIL: test_risk_manager_position_limits (__main__.TestEnhancedTradingSystem)\nTest risk manager position limits\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_enhanced_trading.py\", line 196, in test_risk_manager_position_limits\n    self.assertTrue(allowed, f\"Should allow reasonable position: {reason}\")\nAssertionError: False is not true : Should allow reasonable position: Exceeds single position limit (7.5%)\n\n----------------------------------------------------------------------\nRan 7 tests in 0.027s\n\nFAILED (failures=2, errors=1)\n",
        "return_code": 1
      },
      "test_decision_transformer": {
        "status": "passed",
        "output": "Running Decision Transformer tests...\n",
        "error": "/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py:256: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  'timestamp': pd.date_range('2023-01-01', periods=1000, freq='H'),\n.INFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nEINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nEINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nEINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nEINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nFINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nE.EINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nWARNING:pc.offline_rl_trainer:QUARANTINE APPLIED: Removed 0.0 days of recent data\nINFO:pc.offline_rl_trainer:Training data ends at: 2025-05-13 05:36:52.855365\nFINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nFINFO:pc.models.decision_transformer:Freezing backbone, keeping last 2 layers trainable\nF\n======================================================================\nERROR: test_backbone_freezing (__main__.TestDecisionTransformer)\nTest backbone freezing functionality\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 99, in test_backbone_freezing\n    self.model.freeze_backbone()\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1729, in __getattr__\n    raise AttributeError(f\"'{type(self).__name__}' object has no attribute '{name}'\")\nAttributeError: 'DecisionTransformer' object has no attribute 'freeze_backbone'\n\n======================================================================\nERROR: test_checkpoint_save_load (__main__.TestDecisionTransformer)\nTest model checkpoint saving and loading\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 160, in test_checkpoint_save_load\n    self.model.save_checkpoint(checkpoint_path, optimizer, epoch=5)\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1729, in __getattr__\n    raise AttributeError(f\"'{type(self).__name__}' object has no attribute '{name}'\")\nAttributeError: 'DecisionTransformer' object has no attribute 'save_checkpoint'\n\n======================================================================\nERROR: test_forward_pass (__main__.TestDecisionTransformer)\nTest forward pass through model\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 72, in test_forward_pass\n    outputs = self.model(states, actions, returns_to_go, timesteps)\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1553, in _wrapped_call_impl\n    return self._call_impl(*args, **kwargs)\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1562, in _call_impl\n    return forward_call(*args, **kwargs)\n  File \"/Users/zach/Documents/Git/TickerML/pc/models/decision_transformer.py\", line 292, in forward\n    state_embeddings = self.state_embedding(states)\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1553, in _wrapped_call_impl\n    return self._call_impl(*args, **kwargs)\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1562, in _call_impl\n    return forward_call(*args, **kwargs)\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/linear.py\", line 117, in forward\n    return F.linear(input, self.weight, self.bias)\nRuntimeError: mat1 and mat2 shapes cannot be multiplied (120x256 and 32x128)\n\n======================================================================\nERROR: test_inference (__main__.TestDecisionTransformer)\nTest single-step inference\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 142, in test_inference\n    action, position_size, risk_score = self.model.get_action(\nTypeError: DecisionTransformer.get_action() got an unexpected keyword argument 'deterministic'\n\n======================================================================\nERROR: test_unfreeze_layers (__main__.TestDecisionTransformer)\nTest selective unfreezing of layers\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 118, in test_unfreeze_layers\n    self.model.freeze_backbone()\n  File \"/Users/zach/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1729, in __getattr__\n    raise AttributeError(f\"'{type(self).__name__}' object has no attribute '{name}'\")\nAttributeError: 'DecisionTransformer' object has no attribute 'freeze_backbone'\n\n======================================================================\nERROR: test_attention_forward (__main__.TestMultiHeadAttention)\nTest attention forward pass\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 190, in setUp\n    self.config = DecisionTransformerConfig(\nTypeError: DecisionTransformerConfig.__init__() got an unexpected keyword argument 'use_flash_attention'\n\n======================================================================\nFAIL: test_model_creation (__main__.TestDecisionTransformer)\nTest model initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 56, in test_model_creation\n    self.assertTrue(hasattr(self.model, 'risk_score_head'))\nAssertionError: False is not true\n\n======================================================================\nFAIL: test_quarantine_application (__main__.TestOfflineRLTrainer)\nTest 30-day quarantine rule\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 334, in test_quarantine_application\n    self.assertEqual(len(quarantined), 2)  # Only first 2 rows should remain\nAssertionError: 1 != 2\n\n======================================================================\nFAIL: test_returns_to_go_calculation (__main__.TestOfflineRLTrainer)\nTest returns-to-go calculation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 349, in test_returns_to_go_calculation\n    self.assertAlmostEqual(returns_to_go[-2], expected, places=5)\nAssertionError: 8 != 8.5 within 5 places (0.5 difference)\n\n======================================================================\nFAIL: test_risk_adjusted_rewards (__main__.TestOfflineRLTrainer)\nTest risk-adjusted reward calculation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_decision_transformer.py\", line 362, in test_risk_adjusted_rewards\n    self.assertLess(rewards[1], returns[1])  # Drawdown penalty applied\nAssertionError: 0.17209980628768845 not less than -0.02\n\n----------------------------------------------------------------------\nRan 12 tests in 0.301s\n\nFAILED (failures=4, errors=6)\n"
      },
      "test_arbitrage": {
        "status": "failed",
        "output": "Running arbitrage tests...\n\n\u274c Some arbitrage tests failed!\n",
        "error": "test_opportunity_creation (__main__.TestArbitrageOpportunity)\nTest creating arbitrage opportunity ... ERROR\ntest_opportunity_profitability (__main__.TestArbitrageOpportunity)\nTest profitability calculation ... ERROR\ntest_add_exchange (__main__.TestArbitrageMonitor)\nTest adding exchange to monitor ... ERROR\ntest_add_symbol (__main__.TestArbitrageMonitor)\nTest adding symbol to monitor ... ERROR\ntest_arbitrage_detection (__main__.TestArbitrageMonitor)\nTest arbitrage opportunity detection ... ERROR\ntest_fee_calculation (__main__.TestArbitrageMonitor)\nTest fee calculation in arbitrage detection ... ERROR\ntest_get_best_opportunity (__main__.TestArbitrageMonitor)\nTest getting best opportunity ... ERROR\ntest_get_recent_opportunities (__main__.TestArbitrageMonitor)\nTest getting recent opportunities ... ERROR\ntest_latency_adjustment (__main__.TestArbitrageMonitor)\nTest latency adjustment in profit calculation ... ERROR\ntest_monitor_initialization (__main__.TestArbitrageMonitor)\nTest monitor initialization ... ERROR\ntest_opportunity_logging (__main__.TestArbitrageMonitor)\nTest opportunity logging to database ... ERROR\ntest_end_to_end_monitoring (__main__.TestArbitrageIntegration)\nTest end-to-end arbitrage monitoring workflow ... ERROR\n\n======================================================================\nERROR: test_opportunity_creation (__main__.TestArbitrageOpportunity)\nTest creating arbitrage opportunity\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 94, in test_opportunity_creation\n    opportunity = ArbitrageOpportunity(\nNameError: name 'ArbitrageOpportunity' is not defined\n\n======================================================================\nERROR: test_opportunity_profitability (__main__.TestArbitrageOpportunity)\nTest profitability calculation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 118, in test_opportunity_profitability\n    profitable = ArbitrageOpportunity(\nNameError: name 'ArbitrageOpportunity' is not defined\n\n======================================================================\nERROR: test_add_exchange (__main__.TestArbitrageMonitor)\nTest adding exchange to monitor\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_add_symbol (__main__.TestArbitrageMonitor)\nTest adding symbol to monitor\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_arbitrage_detection (__main__.TestArbitrageMonitor)\nTest arbitrage opportunity detection\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_fee_calculation (__main__.TestArbitrageMonitor)\nTest fee calculation in arbitrage detection\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_get_best_opportunity (__main__.TestArbitrageMonitor)\nTest getting best opportunity\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_get_recent_opportunities (__main__.TestArbitrageMonitor)\nTest getting recent opportunities\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_latency_adjustment (__main__.TestArbitrageMonitor)\nTest latency adjustment in profit calculation\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_monitor_initialization (__main__.TestArbitrageMonitor)\nTest monitor initialization\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_opportunity_logging (__main__.TestArbitrageMonitor)\nTest opportunity logging to database\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 162, in setUp\n    self.monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n======================================================================\nERROR: test_end_to_end_monitoring (__main__.TestArbitrageIntegration)\nTest end-to-end arbitrage monitoring workflow\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 603, in test_end_to_end_monitoring\n    asyncio.run(run_test())\n  File \"/Users/zach/miniconda3/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/Users/zach/miniconda3/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/Users/zach/Documents/Git/TickerML/tests/test_arbitrage.py\", line 527, in run_test\n    monitor = ArbitrageMonitor()\nNameError: name 'ArbitrageMonitor' is not defined\n\n----------------------------------------------------------------------\nRan 12 tests in 0.003s\n\nFAILED (errors=12)\n",
        "return_code": 1
      },
      "test_arbitrage_simple": {
        "status": "passed",
        "output": "Running simplified arbitrage tests...\n\n\u2705 All arbitrage tests passed!\n",
        "error": "test_latency_adjustment (__main__.TestArbitrageCalculations)\nTest latency risk adjustment ... ok\ntest_profit_after_fees (__main__.TestArbitrageCalculations)\nTest profit calculation after fees ... ok\ntest_profit_estimation (__main__.TestArbitrageCalculations)\nTest estimated profit calculation ... ok\ntest_profitability_threshold (__main__.TestArbitrageCalculations)\nTest profitability threshold checking ... ok\ntest_quantity_calculation (__main__.TestArbitrageCalculations)\nTest maximum quantity calculation ... ok\ntest_spread_calculation (__main__.TestArbitrageCalculations)\nTest spread percentage calculation ... ok\ntest_best_price_extraction (__main__.TestOrderBookAnalysis)\nTest extracting best bid/ask prices ... ok\ntest_depth_analysis (__main__.TestOrderBookAnalysis)\nTest analyzing orderbook depth ... ok\ntest_spread_calculation_from_orderbook (__main__.TestOrderBookAnalysis)\nTest spread calculation from orderbook ... ok\ntest_opportunity_logging (__main__.TestDatabaseOperations)\nTest logging arbitrage opportunity ... ok\ntest_opportunity_querying (__main__.TestDatabaseOperations)\nTest querying arbitrage opportunities ... ok\n\n----------------------------------------------------------------------\nRan 11 tests in 0.003s\n\nOK\n"
      },
      "test_pipeline": {
        "status": "passed",
        "output": "",
        "error": "2025-06-22 05:36:53,674 - INFO - \ud83e\uddea Starting pipeline tests...\n2025-06-22 05:36:53,674 - INFO - \n--- Running File Structure Test ---\n2025-06-22 05:36:53,674 - INFO - Testing file structure...\n2025-06-22 05:36:53,674 - INFO - \u2713 All required files present\n2025-06-22 05:36:53,674 - INFO - \n--- Running Imports Test ---\n2025-06-22 05:36:53,674 - INFO - Testing imports...\n2025-06-22 05:36:53,715 - INFO - \u2713 Basic packages imported successfully\n2025-06-22 05:36:54,212 - INFO - \u2139 ML packages not available (Raspberry Pi mode)\n2025-06-22 05:36:54,288 - INFO - \u2713 Flask imported successfully\n2025-06-22 05:36:54,288 - INFO - \n--- Running Database Test ---\n2025-06-22 05:36:54,290 - INFO - Testing database operations...\n2025-06-22 05:36:54,300 - WARNING - database.ohlcv_path not found in config. Using default.\n2025-06-22 05:36:54,300 - INFO - Loaded data.binance_api_base from config: https://api.binance.us/api/v3\n2025-06-22 05:36:54,300 - INFO - Loaded data.symbols from config: ['BTCUSD', 'ETHUSD']\n2025-06-22 05:36:54,300 - INFO - Enhanced database schema initialized for high-frequency data collection\n2025-06-22 05:36:54,300 - INFO - Database initialized at /Users/zach/Documents/Git/TickerML/data/db/crypto_ohlcv.db\n2025-06-22 05:36:54,301 - INFO - Stored data for TESTUSDT at 2025-06-22 05:36:54.301000\n2025-06-22 05:36:54,302 - INFO - \u2713 Database operations successful\n2025-06-22 05:36:54,302 - INFO - \n--- Running API Connection Test ---\n2025-06-22 05:36:54,302 - INFO - Testing API connection...\n2025-06-22 05:36:54,306 - INFO - Loaded API base from config: https://api.binance.us/api/v3\n2025-06-22 05:36:54,388 - INFO - \u2713 API connection to https://api.binance.us/api/v3/ping successful\n2025-06-22 05:36:54,389 - INFO - \n--- Running Feature Engineering Test ---\n2025-06-22 05:36:54,389 - INFO - Testing feature engineering...\n2025-06-22 05:36:54,555 - ERROR - Error computing technical indicators: module 'ta.volume' has no attribute 'volume_sma'\n2025-06-22 05:36:54,556 - INFO - \u2713 Feature engineering successful\n2025-06-22 05:36:54,556 - INFO - \n--- Running Model Architecture Test ---\n2025-06-22 05:36:54,556 - INFO - Testing model architecture...\n2025-06-22 05:36:55,139 - INFO - \u2713 Model architecture test successful\n2025-06-22 05:36:55,140 - INFO - \n--- Running Dashboard Test ---\n2025-06-22 05:36:55,140 - INFO - Testing dashboard components...\n2025-06-22 05:36:55,145 - WARNING - db_path not found in config or its parent key is missing. Using default: /Users/zach/Documents/Git/TickerML/data/db/crypto_ohlcv.db\n2025-06-22 05:36:55,145 - INFO - Loaded symbols from config: ['BTCUSD', 'ETHUSD']\n2025-06-22 05:36:55,145 - INFO - Loaded host from config: 0.0.0.0\n2025-06-22 05:36:55,145 - INFO - Loaded port from config: 5005\n2025-06-22 05:36:55,145 - INFO - Loaded debug from config: False\n2025-06-22 05:36:55,150 - INFO - \u2713 Dashboard test successful\n2025-06-22 05:36:55,150 - INFO - \n==================================================\n2025-06-22 05:36:55,150 - INFO - TEST SUMMARY\n2025-06-22 05:36:55,150 - INFO - ==================================================\n2025-06-22 05:36:55,150 - INFO - File Structure       \u2713 PASS\n2025-06-22 05:36:55,150 - INFO - Imports              \u2713 PASS\n2025-06-22 05:36:55,150 - INFO - Database             \u2713 PASS\n2025-06-22 05:36:55,150 - INFO - API Connection       \u2713 PASS\n2025-06-22 05:36:55,150 - INFO - Feature Engineering  \u2713 PASS\n2025-06-22 05:36:55,150 - INFO - Model Architecture   \u2713 PASS\n2025-06-22 05:36:55,151 - INFO - Dashboard            \u2713 PASS\n2025-06-22 05:36:55,151 - INFO - \nPassed: 7/7\n2025-06-22 05:36:55,151 - INFO - \ud83c\udf89 All tests passed! Pipeline is ready.\n"
      },
      "test_system_health": {
        "status": "timeout",
        "error": "Test timed out after 60 seconds"
      }
    }
  },
  "components": {
    "exchange_binance": true,
    "exchange_coinbase": true,
    "exchange_kraken": true,
    "exchange_kucoin": true,
    "kafka_producers_count": 3,
    "kafka_consumers_count": 2,
    "model_files_count": 2,
    "decision_transformer_exists": true,
    "paper_trader_exists": true,
    "risk_manager_exists": true,
    "arbitrage_monitor_exists": true
  },
  "dependencies": {
    "python_version": "3.10.12 | packaged by conda-forge | (main, Jun 23 2023, 22:41:52) [Clang 15.0.7 ]",
    "torch_available": true,
    "torch_version": "2.4.0",
    "cuda_available": false,
    "kafka_running": false,
    "sqlite_available": true,
    "database_exists": true,
    "websocket-client_available": false,
    "pyyaml_available": false
  },
  "performance": {
    "cpu_count": 12,
    "cpu_percent": 56.5,
    "memory_total_gb": 18.0,
    "memory_available_gb": 5.93231201171875,
    "memory_percent": 67.0,
    "gpu_available": false,
    "database_size_mb": 0.21484375,
    "ohlcv_records": 9,
    "recent_ohlcv_records": 9,
    "model_inference_error": "DecisionTransformerConfig.__init__() got an unexpected keyword argument 'hidden_size'"
  },
  "overall_status": "fair",
  "health_score": 0.68
}